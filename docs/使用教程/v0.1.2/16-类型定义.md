# TypeScript 类型定义

## 简介

科技风组件库提供了完整的 TypeScript 类型定义，确保开发过程中的类型安全和良好的开发体验。本文档详细介绍了所有可用的类型接口和使用方法。

## 核心类型

### TechTheme - 主题配置接口

主题系统的核心类型定义，包含颜色、效果和渐变配置。

```typescript
interface TechTheme {
  colors: {
    bg: string;              // 主背景色
    panel: string;           // 面板背景色  
    panel2: string;          // 次级面板背景色
    muted: string;           // 弱化文本颜色
    primary: string;         // 主色调
    accent: string;          // 强调色（青色荧光）
    border: string;          // 边框颜色
    ring: string;            // 焦点环颜色
    text: string;            // 主文本颜色
    textMuted: string;       // 次要文本颜色
  };
  effects: {
    glow: string;            // 发光效果样式
    backdrop: string;        // 毛玻璃背景效果
  };
  gradients: {
    background: string;      // 页面背景渐变
    sidebar: string;         // 侧边栏渐变
    card: string;            // 卡片渐变
  };
}
```

#### 使用示例

```tsx
import { TechTheme, TechThemeProvider } from 'yggjs_rlayout/tech';

// 自定义主题配置
const customTheme: Partial<TechTheme> = {
  colors: {
    accent: '#ff6b35',       // 橙色强调色
    primary: '#4CAF50',      // 绿色主色
  },
  effects: {
    glow: '0 0 20px rgba(255, 107, 53, 0.5)',
  }
};

<TechThemeProvider theme={customTheme}>
  <App />
</TechThemeProvider>
```

### TechIconName - 图标名称类型

定义了所有可用的图标名称。

```typescript
type TechIconName = 
  | 'menu'              // 菜单图标
  | 'dashboard'         // 仪表盘图标
  | 'book'              // 书籍图标
  | 'info'              // 信息图标
  | 'home'              // 主页图标
  | 'guide'             // 指南图标
  | 'api'               // API图标
  | 'search'            // 搜索图标
  | 'user'              // 用户图标
  | 'settings'          // 设置图标
  | 'logout'            // 登出图标
  | 'chevron-left'      // 左箭头
  | 'chevron-right'     // 右箭头
  | 'chevron-down'      // 下箭头
  | 'plus'              // 加号图标
  | 'deploy'            // 部署图标
  | 'profile'           // 个人资料图标
  | 'help';             // 帮助图标
```

#### 使用示例

```tsx
import { TechIcon, TechIconName } from 'yggjs_rlayout/tech';

// 类型安全的图标使用
const iconName: TechIconName = 'dashboard';

<TechIcon name={iconName} size={24} />

// 在函数中使用类型
function renderIcon(icon: TechIconName, size: number = 16) {
  return <TechIcon name={icon} size={size} />;
}
```

## 组件属性类型

### 布局组件类型

#### TechLayoutProps

```typescript
interface TechLayoutProps {
  children: React.ReactNode;
  
  // Header 相关属性
  brand?: React.ReactNode;
  headerMenuItems?: TechMenuItem[];
  selectedHeaderKey?: string;
  onHeaderMenuSelect?: (key: string) => void;
  
  // Sidebar 相关属性  
  sidebarItems: TechMenuItem[];
  selectedSidebarKey?: string;
  onSidebarSelect?: (key: string) => void;
  
  // 布局配置
  defaultCollapsed?: boolean;
  sidebarWidth?: number;
  collapsedWidth?: number;
  headerHeight?: number;
  
  // 样式属性
  className?: string;
  style?: React.CSSProperties;
}
```

#### TechThemeProviderProps

```typescript
interface TechThemeProviderProps {
  children: React.ReactNode;
  theme?: Partial<TechTheme>;
}
```

### 基础组件类型

#### TechButtonProps

```typescript
interface TechButtonProps extends Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, 'onClick' | 'disabled' | 'style' | 'className'> {
  children?: React.ReactNode;
  variant?: 'primary' | 'secondary' | 'ghost' | 'toggle';
  size?: 'small' | 'medium' | 'large';
  icon?: TechIconName;
  iconOnly?: boolean;
  disabled?: boolean;
  loading?: boolean;
  onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;
  className?: string;
  style?: React.CSSProperties;
  'aria-label'?: string;
  type?: 'button' | 'submit' | 'reset';
}
```

#### TechCardProps

```typescript
interface TechCardProps {
  children: React.ReactNode;
  title?: string;
  subtitle?: string;
  icon?: TechIconName;
  variant?: 'default' | 'outlined' | 'filled' | 'glass' | 'gradient';
  size?: 'small' | 'medium' | 'large';
  hoverable?: boolean;
  clickable?: boolean;
  loading?: boolean;
  disabled?: boolean;
  actions?: React.ReactNode;
  extra?: React.ReactNode;
  onClick?: () => void;
  className?: string;
  style?: React.CSSProperties;
  bodyStyle?: React.CSSProperties;
  headerStyle?: React.CSSProperties;
}
```

### 导航组件类型

#### TechMenuItem

```typescript
interface TechMenuItem extends Omit<BaseMenuItem, 'label'> {
  label: string;                    // 菜单项显示文本
  icon?: TechIconName;              // 菜单项图标
  href?: string;                    // 普通链接地址
  to?: string;                      // SPA路由路径
  children?: TechMenuItem[];        // 子菜单项
}
```

#### TechMenuProps

```typescript
interface TechMenuProps extends Omit<MenuProps, 'items' | 'onSelect'> {
  items: TechMenuItem[];
  collapsed?: boolean;
  linkComponent?: LinkLikeComponent;
  onSelectItem?: (item: TechMenuItem) => void;
  onSelect?: MenuProps['onSelect'];
}
```

#### TechBreadcrumbItem

```typescript
interface TechBreadcrumbItem {
  key: string;
  label: React.ReactNode;
  href?: string;
  icon?: TechIconName;
  onClick?: () => void;
}
```

#### TechBreadcrumbProps

```typescript
interface TechBreadcrumbProps {
  items: TechBreadcrumbItem[];
  separator?: React.ReactNode;
  maxItems?: number;
  showHome?: boolean;
  homeIcon?: TechIconName;
  onHomeClick?: () => void;
  variant?: 'simple' | 'icon';
  className?: string;
  style?: React.CSSProperties;
}
```

### 功能组件类型

#### TechSearchProps

```typescript
interface TechSearchProps extends Omit<SearchProps, 'variant' | 'showSearchIcon' | 'searchButton'> {
  width?: number | string;
}
```

#### TechUserCenterItem

```typescript
interface TechUserCenterItem {
  key: string;
  label: string;
  icon?: TechIconName;
  onClick?: () => void;
  href?: string;
  danger?: boolean;                 // 是否为危险操作
}
```

#### TechUserCenterProps

```typescript
interface TechUserCenterProps {
  avatar?: string;
  username?: string;
  userInfo?: string;
  items?: TechUserCenterItem[];
  size?: 'small' | 'medium' | 'large';
  showUsername?: boolean;
  onAvatarClick?: () => void;
  className?: string;
}
```

#### TechFooterLink

```typescript
interface TechFooterLink {
  label: string;
  href?: string;
  onClick?: () => void;
  icon?: TechIconName;
}
```

#### TechFooterSection

```typescript
interface TechFooterSection {
  title: string;
  links: TechFooterLink[];
}
```

#### TechFooterProps

```typescript
interface TechFooterProps {
  brand?: React.ReactNode;
  description?: string;
  sections?: TechFooterSection[];
  socialLinks?: TechFooterLink[];
  copyright?: string;
  version?: string;
  showBackToTop?: boolean;
  className?: string;
  style?: React.CSSProperties;
}
```

### 工具组件类型

#### TechGlobalStylesProps

```typescript
interface TechGlobalStylesProps {
  enableScrollbarStyling?: boolean;    // 是否启用滚动条样式
  enableGlobalReset?: boolean;         // 是否启用全局样式重置
}
```

#### TechPageHeaderProps

```typescript
interface TechPageHeaderProps {
  breadcrumb?: string | TechBreadcrumbItem[];
  breadcrumbProps?: Omit<TechBreadcrumbProps, 'items'>;
  title?: string;
  actions?: React.ReactNode;
  className?: string;
  style?: React.CSSProperties;
}
```

## 工具类型

### LinkLikeComponent

用于路由集成的链接组件类型：

```typescript
type LinkLikeComponent = React.ComponentType<{
  to: string;
  className?: string;
  children?: React.ReactNode;
}>;
```

#### 使用示例

```tsx
import { Link } from 'react-router-dom';
import { TechMenu, LinkLikeComponent } from 'yggjs_rlayout/tech';

// React Router Link 组件符合 LinkLikeComponent 接口
const RouterLink: LinkLikeComponent = Link;

<TechMenu 
  items={menuItems}
  linkComponent={RouterLink}
/>
```

## 泛型类型

### 扩展现有类型

```typescript
// 扩展 TechMenuItem 添加自定义属性
interface CustomMenuItem extends TechMenuItem {
  badge?: number;
  color?: string;
  permission?: string;
}

// 扩展主题配置
interface CustomTheme extends TechTheme {
  animations: {
    duration: number;
    easing: string;
  };
}
```

## 类型守卫和工具函数

### 图标名称验证

```typescript
import { TechIconName } from 'yggjs_rlayout/tech';

function isValidIconName(name: string): name is TechIconName {
  const validIcons: TechIconName[] = [
    'menu', 'dashboard', 'book', 'info', 'home', 'guide', 'api',
    'search', 'user', 'settings', 'logout', 'chevron-left',
    'chevron-right', 'chevron-down', 'plus', 'deploy', 'profile', 'help'
  ];
  return validIcons.includes(name as TechIconName);
}

// 使用示例
function SafeIcon({ name }: { name: string }) {
  if (isValidIconName(name)) {
    return <TechIcon name={name} />;
  }
  return <TechIcon name="info" />; // 默认图标
}
```

### 主题类型检查

```typescript
import { TechTheme } from 'yggjs_rlayout/tech';

function isValidTheme(theme: any): theme is Partial<TechTheme> {
  return typeof theme === 'object' && theme !== null;
}

function mergeThemes(baseTheme: TechTheme, customTheme: unknown): TechTheme {
  if (!isValidTheme(customTheme)) {
    return baseTheme;
  }
  
  return {
    ...baseTheme,
    colors: { ...baseTheme.colors, ...customTheme.colors },
    effects: { ...baseTheme.effects, ...customTheme.effects },
    gradients: { ...baseTheme.gradients, ...customTheme.gradients },
  };
}
```

## 常见类型使用模式

### 1. 组件属性透传

```typescript
import { TechButtonProps } from 'yggjs_rlayout/tech';

interface CustomButtonProps extends Omit<TechButtonProps, 'variant'> {
  variant: 'success' | 'warning' | 'error';
}

function CustomButton(props: CustomButtonProps) {
  const { variant, ...techButtonProps } = props;
  
  const techVariant = variant === 'success' ? 'primary' : 'secondary';
  
  return <TechButton {...techButtonProps} variant={techVariant} />;
}
```

### 2. 条件类型

```typescript
import { TechIconName } from 'yggjs_rlayout/tech';

type MenuItemWithIcon<T extends boolean> = {
  key: string;
  label: string;
} & (T extends true ? { icon: TechIconName } : { icon?: TechIconName });

// 使用
const withIcon: MenuItemWithIcon<true> = {
  key: 'home',
  label: '首页',
  icon: 'home', // 必需
};

const withoutIcon: MenuItemWithIcon<false> = {
  key: 'about',
  label: '关于',
  // icon 可选
};
```

### 3. 联合类型和映射类型

```typescript
type TechVariant = 'primary' | 'secondary' | 'ghost' | 'toggle';
type TechSize = 'small' | 'medium' | 'large';

// 创建所有可能的组合
type TechButtonConfig = {
  [V in TechVariant]: {
    [S in TechSize]: {
      variant: V;
      size: S;
      defaultProps: Partial<TechButtonProps>;
    };
  };
};
```

## 最佳实践

### 1. 使用严格类型

```typescript
// ✅ 推荐：使用具体的类型
const menuItems: TechMenuItem[] = [
  { key: 'home', label: '首页', icon: 'home' }
];

// ❌ 避免：使用 any
const menuItems: any[] = [
  { key: 'home', label: '首页', icon: 'home' }
];
```

### 2. 类型断言谨慎使用

```typescript
// ✅ 推荐：类型守卫
function isMenuItem(item: unknown): item is TechMenuItem {
  return typeof item === 'object' && 
         item !== null && 
         'key' in item && 
         'label' in item;
}

// ❌ 避免：强制类型断言
const item = unknownData as TechMenuItem;
```

### 3. 导入类型的建议

```typescript
// ✅ 推荐：明确导入类型
import type { TechTheme, TechIconName } from 'yggjs_rlayout/tech';
import { TechButton, TechCard } from 'yggjs_rlayout/tech';

// ✅ 也可以：混合导入
import { TechButton, type TechButtonProps } from 'yggjs_rlayout/tech';
```

## 常见问题

### 1. 类型不兼容？

检查版本兼容性和类型定义：

```bash
# 确保使用最新版本
npm install yggjs_rlayout@latest

# 检查 TypeScript 版本
npx tsc --version
```

### 2. 图标名称提示不显示？

确保正确导入了类型：

```typescript
import { TechIconName } from 'yggjs_rlayout/tech';

// 这样可以获得自动补全
const icon: TechIconName = 'dashb'; // 会提示可用选项
```

### 3. 组件属性类型错误？

检查是否使用了正确的接口：

```typescript
import { TechButtonProps } from 'yggjs_rlayout/tech';

// 扩展时使用正确的基础接口
interface MyButtonProps extends TechButtonProps {
  customProp?: string;
}
```

### 4. 主题类型不匹配？

使用 `Partial<TechTheme>` 进行部分配置：

```typescript
import type { TechTheme } from 'yggjs_rlayout/tech';

// ✅ 正确：部分主题配置
const customTheme: Partial<TechTheme> = {
  colors: {
    accent: '#ff0000'
  }
};

// ❌ 错误：完整主题配置会要求所有属性
const customTheme: TechTheme = {
  colors: { accent: '#ff0000' } // 缺少其他必需属性
};
```